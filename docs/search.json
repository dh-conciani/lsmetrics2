[{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Bernardo Niebuhr. Author, maintainer. Maurício Humberto Vancine. Author. John Wesley Ribeiro. Author. Milton Cezar Ribeiro. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Niebuhr B, Vancine M, Ribeiro J, Ribeiro M (2023). lsmetrics: lsmetrics. https://mauriciovancine.github.io/lsmetrics, https://github.com/mauriciovancine/lsmetrics,.","code":"@Manual{,   title = {lsmetrics: lsmetrics},   author = {Bernardo Niebuhr and Maurício Humberto Vancine and John Wesley Ribeiro and Milton Cezar Ribeiro},   year = {2023},   note = {https://mauriciovancine.github.io/lsmetrics, https://github.com/mauriciovancine/lsmetrics,}, }"},{"path":"/index.html","id":"lsmetrics-","dir":"","previous_headings":"","what":"lsmetrics","title":"lsmetrics","text":"lsmetrics provides tools calculate landscape metrics using R GRASS GIS.","code":""},{"path":"/index.html","id":"instalation","dir":"","previous_headings":"","what":"Instalation","title":"lsmetrics","text":"install development version lsmetrics R package, please use:","code":"library(pak) pak::pkg_install(\"mauriciovancine/lsmetrics\")"},{"path":"/reference/hello.html","id":null,"dir":"Reference","previous_headings":"","what":"Hello, World! — hello","title":"Hello, World! — hello","text":"Prints 'Hello, world!'.","code":""},{"path":"/reference/hello.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hello, World! — hello","text":"","code":"hello()"},{"path":"/reference/hello.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Hello, World! — hello","text":"","code":"hello() #> Error in hello(): could not find function \"hello\""},{"path":"/reference/lsm_area.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate area — lsm_area","title":"Calculate area — lsm_area","text":"Identifies patches calculates area using r.area GRASS module.","code":""},{"path":"/reference/lsm_area.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate area — lsm_area","text":"","code":"lsm_area(input, output = NULL, zero_as_na = FALSE)"},{"path":"/reference/lsm_area.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate area — lsm_area","text":"input [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). output [character=\"\"]  Patch area map name inside GRASS Data Base. zero_as_na [logical(1)=FALSE]  TRUE, function treats cells zero null (non-habitat); FALSE, function converts zero cells null cells.","code":""},{"path":"/reference/lsm_area.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate area — lsm_area","text":"","code":"library(lsmetrics) library(terra) #> terra 1.7.29  # read habitat data f <- system.file(\"raster/toy_landscape_habitat.tif\", package = \"lsmetrics\") r <- terra::rast(f)  # plot plot(r, legend = FALSE, axes = FALSE, main = \"Binary habitat\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r)  # find grass path_grass <- as.character(link2GI::findGRASS()[1])  path_grass #> [1] \"/usr/lib/grass82\"  # create grassdb rgrass::initGRASS(gisBase = path_grass,                   SG = r,                   gisDbase = \"grassdb\",                   location = \"newLocation\",                   mapset = \"PERMANENT\",                   override = TRUE) #> gisdbase    grassdb  #> location    newLocation  #> mapset      PERMANENT  #> rows        16  #> columns     16  #> north       7525600  #> south       7524000  #> west        234000  #> east        235600  #> nsres       100  #> ewres       100  #> projection: #>  PROJCRS[\"WGS 84 / UTM zone 23S\", #>     BASEGEOGCRS[\"WGS 84\", #>         ENSEMBLE[\"World Geodetic System 1984 ensemble\", #>             MEMBER[\"World Geodetic System 1984 (Transit)\"], #>             MEMBER[\"World Geodetic System 1984 (G730)\"], #>             MEMBER[\"World Geodetic System 1984 (G873)\"], #>             MEMBER[\"World Geodetic System 1984 (G1150)\"], #>             MEMBER[\"World Geodetic System 1984 (G1674)\"], #>             MEMBER[\"World Geodetic System 1984 (G1762)\"], #>             MEMBER[\"World Geodetic System 1984 (G2139)\"], #>             ELLIPSOID[\"WGS 84\",6378137,298.257223563, #>                 LENGTHUNIT[\"metre\",1]], #>             ENSEMBLEACCURACY[2.0]], #>         PRIMEM[\"Greenwich\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         ID[\"EPSG\",4326]], #>     CONVERSION[\"UTM zone 23S\", #>         METHOD[\"Transverse Mercator\", #>             ID[\"EPSG\",9807]], #>         PARAMETER[\"Latitude of natural origin\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8801]], #>         PARAMETER[\"Longitude of natural origin\",-45, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8802]], #>         PARAMETER[\"Scale factor at natural origin\",0.9996, #>             SCALEUNIT[\"unity\",1], #>             ID[\"EPSG\",8805]], #>         PARAMETER[\"False easting\",500000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8806]], #>         PARAMETER[\"False northing\",10000000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8807]]], #>     CS[Cartesian,2], #>         AXIS[\"(E)\",east, #>             ORDER[1], #>             LENGTHUNIT[\"metre\",1]], #>         AXIS[\"(N)\",north, #>             ORDER[2], #>             LENGTHUNIT[\"metre\",1]], #>     USAGE[ #>         SCOPE[\"Engineering survey, topographic mapping.\"], #>         AREA[\"Between 48°W and 42°W, southern hemisphere between 80°S and equator, onshore and offshore. Brazil.\"], #>         BBOX[-80,-48,0,-42]], #>     ID[\"EPSG\",32723]]   # import raster from r to grass rgrass::write_RAST(x = r, flags = c(\"o\", \"overwrite\"), vname = \"r\") #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> SpatRaster read into GRASS using r.in.gdal from file  # area lsmetrics::lsm_area(input = \"r\", zero_as_na = FALSE) #> Converting zero as null #> Identifying the patches #> Counting the cell number of patches #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating the area of patches #> Changing the raster color  # files rgrass::execGRASS(cmd = \"g.list\", type = \"raster\") #> r #> r_area_ha #> r_area_ha_int #> r_area_ncell #> r_null #> r_pid  # import from grass to r r_pid <- rgrass::read_RAST(\"r_pid\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c63892c53.grd> created. r_pid #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c63892c53.grd  #> name        : file300c63892c53  #> min value   :                1  #> max value   :                6   # plot plot(r_pid, legend = FALSE, axes = FALSE, main = \"Patch id\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_pid)   # import from grass to r r_area <- rgrass::read_RAST(\"r_area_ha\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Float32> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c645f0e383.grd> created. r_area #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c645f0e383.grd  #> name        : file300c645f0e383  #> min value   :                 1  #> max value   :                49   plot(r_area, legend = FALSE, axes = FALSE, main = \"Area (ha)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_area)"},{"path":"/reference/lsm_core_edge.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify the edge of landscape elements — lsm_core_edge","title":"Identify the edge of landscape elements — lsm_core_edge","text":"Identify edge landscape elements pixel (matrix, core, edge, patch (core + edge), corridor, branch, stepping stone perforation)","code":""},{"path":"/reference/lsm_core_edge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify the edge of landscape elements — lsm_core_edge","text":"","code":"lsm_core_edge(   input,   output = NULL,   input_distance_inside,   edge_depth,   type = \"all\",   calculate_area = FALSE,   original_pid,   calculate_percentage = FALSE,   buffer_radius = NULL )"},{"path":"/reference/lsm_core_edge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify the edge of landscape elements — lsm_core_edge","text":"input [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). output [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). input_distance_inside [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). type [numeric]  Integer indicating edge distance meters considered adjacent form patch. 8 (Queen's case) 4 (Rook's case). edge_dist [numeric]  Integer indicating edge distance meters considered adjacent form patch. 8 (Queen's case) 4 (Rook's case).","code":""},{"path":"/reference/lsm_core_edge.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Identify the edge of landscape elements — lsm_core_edge","text":"","code":"library(lsmetrics) library(terra)  # read habitat data f <- system.file(\"raster/toy_landscape_habitat.tif\", package = \"lsmetrics\") r <- terra::rast(f)  # plot plot(r, legend = FALSE, axes = FALSE, main = \"Binary habitat\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r)   # find grass path_grass <- as.character(link2GI::findGRASS()[1]) path_grass #> [1] \"/usr/lib/grass82\"  # create grassdb rgrass::initGRASS(gisBase = path_grass,                   SG = r,                   gisDbase = \"grassdb\",                   location = \"newLocation\",                   mapset = \"PERMANENT\",                   override = TRUE) #> gisdbase    grassdb  #> location    newLocation  #> mapset      PERMANENT  #> rows        16  #> columns     16  #> north       7525600  #> south       7524000  #> west        234000  #> east        235600  #> nsres       100  #> ewres       100  #> projection: #>  PROJCRS[\"WGS 84 / UTM zone 23S\", #>     BASEGEOGCRS[\"WGS 84\", #>         ENSEMBLE[\"World Geodetic System 1984 ensemble\", #>             MEMBER[\"World Geodetic System 1984 (Transit)\"], #>             MEMBER[\"World Geodetic System 1984 (G730)\"], #>             MEMBER[\"World Geodetic System 1984 (G873)\"], #>             MEMBER[\"World Geodetic System 1984 (G1150)\"], #>             MEMBER[\"World Geodetic System 1984 (G1674)\"], #>             MEMBER[\"World Geodetic System 1984 (G1762)\"], #>             MEMBER[\"World Geodetic System 1984 (G2139)\"], #>             ELLIPSOID[\"WGS 84\",6378137,298.257223563, #>                 LENGTHUNIT[\"metre\",1]], #>             ENSEMBLEACCURACY[2.0]], #>         PRIMEM[\"Greenwich\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         ID[\"EPSG\",4326]], #>     CONVERSION[\"UTM zone 23S\", #>         METHOD[\"Transverse Mercator\", #>             ID[\"EPSG\",9807]], #>         PARAMETER[\"Latitude of natural origin\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8801]], #>         PARAMETER[\"Longitude of natural origin\",-45, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8802]], #>         PARAMETER[\"Scale factor at natural origin\",0.9996, #>             SCALEUNIT[\"unity\",1], #>             ID[\"EPSG\",8805]], #>         PARAMETER[\"False easting\",500000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8806]], #>         PARAMETER[\"False northing\",10000000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8807]]], #>     CS[Cartesian,2], #>         AXIS[\"(E)\",east, #>             ORDER[1], #>             LENGTHUNIT[\"metre\",1]], #>         AXIS[\"(N)\",north, #>             ORDER[2], #>             LENGTHUNIT[\"metre\",1]], #>     USAGE[ #>         SCOPE[\"Engineering survey, topographic mapping.\"], #>         AREA[\"Between 48°W and 42°W, southern hemisphere between 80°S and equator, onshore and offshore. Brazil.\"], #>         BBOX[-80,-48,0,-42]], #>     ID[\"EPSG\",32723]]   # import raster from r to grass rgrass::write_RAST(x = r, flags = c(\"o\", \"overwrite\"), vname = \"r\") #> Warning: The command: #> r.in.gdal -o --overwrite input=/tmp/Rtmpi5EcQB/temp_libpath2f5526a68015e/lsmetrics/raster/toy_landscape_habitat.tif output=r #> produced at least one warning during execution: #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> SpatRaster read into GRASS using r.in.gdal from file  # area lsmetrics::lsm_area(input = \"r\", zero_as_na = FALSE) #> Converting zero as null #> Identifying the patches #> Counting the cell number of patches #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating the area of patches #> Changing the raster color  # inside distance lsm_distance(input = \"r\", zero_as_na = FALSE, type = \"inside\") #> Converting zero as null #> Creating raster inverse #> Calculation distance #> Reading raster map <r_inside>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output raster maps... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Transforming raster to integer #> Changing the raster color  # core and edge lsm_core_edge(input = \"r\",               input_distance_inside = \"r_distance_inside\",               edge_depth = 100,               type = \"all\",               calculate_area = TRUE,               original_pid = \"r_pid\",               calculate_percentage = TRUE,               buffer_radius = 100) #> Calculating core #> Converting zero as null #> Identifying the patches #> Counting the cell number of patches #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating the area of patches #> Changing the raster color #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating proportion #> Opening selection map <r_core100> #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating percentage #> Changing the raster color #> Changing the raster color #> Calculating edge #> Converting zero as null #> Identifying the patches #> Counting the cell number of patches #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating the area of patches #> Changing the raster color #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating proportion #> Opening selection map <r_edge100> #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating percentage #> Changing the raster color #> Changing the raster color  # files rgrass::execGRASS(cmd = \"g.list\", type = \"raster\") #> r #> r_area_ha #> r_area_ha_int #> r_area_ncell #> r_core100 #> r_core100_area_ha #> r_core100_area_ha_int #> r_core100_area_ha_original #> r_core100_area_ha_original_int #> r_core100_area_ncell #> r_core100_area_ncell_original #> r_core100_null #> r_core100_pct_buf100 #> r_core100_pid #> r_distance_inside #> r_edge100 #> r_edge100_area_ha #> r_edge100_area_ha_int #> r_edge100_area_ha_original #> r_edge100_area_ha_original_int #> r_edge100_area_ncell #> r_edge100_area_ncell_original #> r_edge100_null #> r_edge100_pct_buf100 #> r_edge100_pid #> r_null #> r_pid  # import from grass to r r_core100 <- rgrass::read_RAST(\"r_core100\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c650a454de.grd> created. r_core100 #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c650a454de.grd  #> name        : file300c650a454de  #> min value   :                 0  #> max value   :                 1   r_core100_area_ha <- rgrass::read_RAST(\"r_core100_area_ha\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Float32> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c61a0672d4.grd> created. r_core100_area_ha #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c61a0672d4.grd  #> name        : file300c61a0672d4  #> min value   :                 4  #> max value   :                31   r_core100_area_ha_original <- rgrass::read_RAST(\"r_core100_area_ha_original\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Float32> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c6435f359f.grd> created. r_core100_area_ha_original #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c6435f359f.grd  #> name        : file300c6435f359f  #> min value   :                 0  #> max value   :                31   r_core100_pct_buf100 <- rgrass::read_RAST(\"r_core100_pct_buf100\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c65e773fac.grd> created. r_core100_pct_buf100 #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c65e773fac.grd  #> name        : file300c65e773fac  #> min value   :                 0  #> max value   :               100    r_edge100 <- rgrass::read_RAST(\"r_edge100\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c62014bc90.grd> created. r_edge100 #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c62014bc90.grd  #> name        : file300c62014bc90  #> min value   :                 0  #> max value   :                 1   r_edge100_area_ha <- rgrass::read_RAST(\"r_edge100_area_ha\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Float32> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c61e48c517.grd> created. r_edge100_area_ha #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c61e48c517.grd  #> name        : file300c61e48c517  #> min value   :                 1  #> max value   :                18   r_edge100_area_ha_original <- rgrass::read_RAST(\"r_edge100_area_ha_original\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Float32> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c647da1adb.grd> created. r_edge100_area_ha_original #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c647da1adb.grd  #> name        : file300c647da1adb  #> min value   :                 1  #> max value   :                18   r_edge100_pct_buf100 <- rgrass::read_RAST(\"r_edge100_pct_buf100\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c660cfe2be.grd> created. r_edge100_pct_buf100 #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c660cfe2be.grd  #> name        : file300c660cfe2be  #> min value   :                 0  #> max value   :                66   # plot plot(r_core100, legend = FALSE, axes = FALSE, main = \"Core\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_core100)   plot(r_core100_area_ha, legend = FALSE, axes = FALSE, main = \"Core area (ha)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_core100_area_ha)   plot(r_core100_area_ha_original, legend = FALSE, axes = FALSE, main = \"Core area original (ha)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_core100_area_ha_original)   plot(r_core100_pct_buf100, legend = FALSE, axes = FALSE, main = \"Core percentage (buffer 100 m)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_core100_pct_buf100)    plot(r_edge100, legend = FALSE, axes = FALSE, main = \"Edge\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_edge100)   plot(r_edge100_area_ha, legend = FALSE, axes = FALSE, main = \"Edge area (ha)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_edge100_area_ha)   plot(r_edge100_area_ha_original, legend = FALSE, axes = FALSE, main = \"Edge area original (ha)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_edge100_area_ha_original)   plot(r_edge100_pct_buf100, legend = FALSE, axes = FALSE, main = \"Edge percentage (buffer 100 m)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_edge100_pct_buf100)"},{"path":"/reference/lsm_distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate patch distance — lsm_distance","title":"Calculate patch distance — lsm_distance","text":"Calculate focal (\"moving window\") values cell using mean r.neighbors module multiplies 100.","code":""},{"path":"/reference/lsm_distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate patch distance — lsm_distance","text":"","code":"lsm_distance(input, output = NULL, zero_as_na = FALSE, type)"},{"path":"/reference/lsm_distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate patch distance — lsm_distance","text":"input [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). output [character=\"\"]  Patch area map name inside GRASS Data Base. zero_as_na [logical=\"\"] type [character=\"\"]","code":""},{"path":"/reference/lsm_distance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate patch distance — lsm_distance","text":"","code":"library(lsmetrics) library(terra)  # read habitat data f <- system.file(\"raster/toy_landscape_habitat.tif\", package = \"lsmetrics\") r <- terra::rast(f)  # plot plot(r, legend = FALSE, axes = FALSE, main = \"Binary habitat\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r)   # find grass path_grass <- as.character(link2GI::findGRASS()[1]) path_grass #> [1] \"/usr/lib/grass82\"  # create grassdb rgrass::initGRASS(gisBase = path_grass,                   SG = r,                   gisDbase = \"grassdb\",                   location = \"newLocation\",                   mapset = \"PERMANENT\",                   override = TRUE) #> gisdbase    grassdb  #> location    newLocation  #> mapset      PERMANENT  #> rows        16  #> columns     16  #> north       7525600  #> south       7524000  #> west        234000  #> east        235600  #> nsres       100  #> ewres       100  #> projection: #>  PROJCRS[\"WGS 84 / UTM zone 23S\", #>     BASEGEOGCRS[\"WGS 84\", #>         ENSEMBLE[\"World Geodetic System 1984 ensemble\", #>             MEMBER[\"World Geodetic System 1984 (Transit)\"], #>             MEMBER[\"World Geodetic System 1984 (G730)\"], #>             MEMBER[\"World Geodetic System 1984 (G873)\"], #>             MEMBER[\"World Geodetic System 1984 (G1150)\"], #>             MEMBER[\"World Geodetic System 1984 (G1674)\"], #>             MEMBER[\"World Geodetic System 1984 (G1762)\"], #>             MEMBER[\"World Geodetic System 1984 (G2139)\"], #>             ELLIPSOID[\"WGS 84\",6378137,298.257223563, #>                 LENGTHUNIT[\"metre\",1]], #>             ENSEMBLEACCURACY[2.0]], #>         PRIMEM[\"Greenwich\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         ID[\"EPSG\",4326]], #>     CONVERSION[\"UTM zone 23S\", #>         METHOD[\"Transverse Mercator\", #>             ID[\"EPSG\",9807]], #>         PARAMETER[\"Latitude of natural origin\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8801]], #>         PARAMETER[\"Longitude of natural origin\",-45, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8802]], #>         PARAMETER[\"Scale factor at natural origin\",0.9996, #>             SCALEUNIT[\"unity\",1], #>             ID[\"EPSG\",8805]], #>         PARAMETER[\"False easting\",500000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8806]], #>         PARAMETER[\"False northing\",10000000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8807]]], #>     CS[Cartesian,2], #>         AXIS[\"(E)\",east, #>             ORDER[1], #>             LENGTHUNIT[\"metre\",1]], #>         AXIS[\"(N)\",north, #>             ORDER[2], #>             LENGTHUNIT[\"metre\",1]], #>     USAGE[ #>         SCOPE[\"Engineering survey, topographic mapping.\"], #>         AREA[\"Between 48°W and 42°W, southern hemisphere between 80°S and equator, onshore and offshore. Brazil.\"], #>         BBOX[-80,-48,0,-42]], #>     ID[\"EPSG\",32723]]   # import raster from r to grass rgrass::write_RAST(x = r, flags = c(\"o\", \"overwrite\"), vname = \"r\") #> Warning: The command: #> r.in.gdal -o --overwrite input=/tmp/Rtmpi5EcQB/temp_libpath2f5526a68015e/lsmetrics/raster/toy_landscape_habitat.tif output=r #> produced at least one warning during execution: #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> SpatRaster read into GRASS using r.in.gdal from file  # distance lsm_distance(input = \"r\", zero_as_na = FALSE, type = \"inside\") #> Converting zero as null #> Creating raster inverse #> Calculation distance #> Reading raster map <r_inside>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output raster maps... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Transforming raster to integer #> Changing the raster color lsm_distance(input = \"r\", zero_as_na = FALSE, type = \"outside\") #> Converting zero as null #> Calculation distance #> Reading raster map <r_null>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output raster maps... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Transforming raster to integer #> Changing the raster color  # files rgrass::execGRASS(cmd = \"g.list\", type = \"raster\") #> r #> r_area_ha #> r_area_ha_int #> r_area_ncell #> r_core100 #> r_core100_area_ha #> r_core100_area_ha_int #> r_core100_area_ha_original #> r_core100_area_ha_original_int #> r_core100_area_ncell #> r_core100_area_ncell_original #> r_core100_null #> r_core100_pct_buf100 #> r_core100_pid #> r_distance_inside #> r_distance_outside #> r_edge100 #> r_edge100_area_ha #> r_edge100_area_ha_int #> r_edge100_area_ha_original #> r_edge100_area_ha_original_int #> r_edge100_area_ncell #> r_edge100_area_ncell_original #> r_edge100_null #> r_edge100_pct_buf100 #> r_edge100_pid #> r_null #> r_pid  # import from grass to r r_dist_in <- rgrass::read_RAST(\"r_distance_inside\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <UInt16> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c61299506e.grd> created. r_dist_in #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c61299506e.grd  #> name        : file300c61299506e  #> min value   :                 0  #> max value   :               447   r_dist_out <- rgrass::read_RAST(\"r_distance_outside\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <UInt16> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c633bac5ad.grd> created. r_dist_out #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c633bac5ad.grd  #> name        : file300c633bac5ad  #> min value   :                 0  #> max value   :               316   # plot plot(r_dist_in, legend = FALSE, axes = FALSE, main = \"Distance inside (m)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_dist_in)   plot(r_dist_out, legend = FALSE, axes = FALSE, main = \"Distance outside (m)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_dist_out)"},{"path":"/reference/lsm_functional_connectivity.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate functional connectivity — lsm_functional_connectivity","title":"Calculate functional connectivity — lsm_functional_connectivity","text":"Identifies functional patches connected.","code":""},{"path":"/reference/lsm_functional_connectivity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate functional connectivity — lsm_functional_connectivity","text":"","code":"lsm_functional_connectivity(   input,   output = NULL,   zero_as_na = FALSE,   input_distance_outside,   gap_crossing )"},{"path":"/reference/lsm_functional_connectivity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate functional connectivity — lsm_functional_connectivity","text":"input [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). output [character=\"\"]  Patch area map name inside GRASS Data Base gap_crossing [numeric(1)=4]{4,8}  Integer indicating cells resolution [numeric(1)=4]{4,8}  Integer indicating cells ","code":""},{"path":"/reference/lsm_functional_connectivity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate functional connectivity — lsm_functional_connectivity","text":"","code":"library(lsmetrics) library(terra)  # read habitat data f <- system.file(\"raster/toy_landscape_habitat.tif\", package = \"lsmetrics\") r <- terra::rast(f)  # plot plot(r, legend = FALSE, axes = FALSE, main = \"Binary habitat\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r)   # find grass path_grass <- as.character(link2GI::findGRASS()[1]) path_grass #> [1] \"/usr/lib/grass82\"  # create grassdb rgrass::initGRASS(gisBase = path_grass,                   SG = r,                   gisDbase = \"grassdb\",                   location = \"newLocation\",                   mapset = \"PERMANENT\",                   override = TRUE) #> gisdbase    grassdb  #> location    newLocation  #> mapset      PERMANENT  #> rows        16  #> columns     16  #> north       7525600  #> south       7524000  #> west        234000  #> east        235600  #> nsres       100  #> ewres       100  #> projection: #>  PROJCRS[\"WGS 84 / UTM zone 23S\", #>     BASEGEOGCRS[\"WGS 84\", #>         ENSEMBLE[\"World Geodetic System 1984 ensemble\", #>             MEMBER[\"World Geodetic System 1984 (Transit)\"], #>             MEMBER[\"World Geodetic System 1984 (G730)\"], #>             MEMBER[\"World Geodetic System 1984 (G873)\"], #>             MEMBER[\"World Geodetic System 1984 (G1150)\"], #>             MEMBER[\"World Geodetic System 1984 (G1674)\"], #>             MEMBER[\"World Geodetic System 1984 (G1762)\"], #>             MEMBER[\"World Geodetic System 1984 (G2139)\"], #>             ELLIPSOID[\"WGS 84\",6378137,298.257223563, #>                 LENGTHUNIT[\"metre\",1]], #>             ENSEMBLEACCURACY[2.0]], #>         PRIMEM[\"Greenwich\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         ID[\"EPSG\",4326]], #>     CONVERSION[\"UTM zone 23S\", #>         METHOD[\"Transverse Mercator\", #>             ID[\"EPSG\",9807]], #>         PARAMETER[\"Latitude of natural origin\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8801]], #>         PARAMETER[\"Longitude of natural origin\",-45, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8802]], #>         PARAMETER[\"Scale factor at natural origin\",0.9996, #>             SCALEUNIT[\"unity\",1], #>             ID[\"EPSG\",8805]], #>         PARAMETER[\"False easting\",500000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8806]], #>         PARAMETER[\"False northing\",10000000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8807]]], #>     CS[Cartesian,2], #>         AXIS[\"(E)\",east, #>             ORDER[1], #>             LENGTHUNIT[\"metre\",1]], #>         AXIS[\"(N)\",north, #>             ORDER[2], #>             LENGTHUNIT[\"metre\",1]], #>     USAGE[ #>         SCOPE[\"Engineering survey, topographic mapping.\"], #>         AREA[\"Between 48°W and 42°W, southern hemisphere between 80°S and equator, onshore and offshore. Brazil.\"], #>         BBOX[-80,-48,0,-42]], #>     ID[\"EPSG\",32723]]   # import raster from r to grass rgrass::write_RAST(x = r, flags = c(\"o\", \"overwrite\"), vname = \"r\") #> Warning: The command: #> r.in.gdal -o --overwrite input=/tmp/Rtmpi5EcQB/temp_libpath2f5526a68015e/lsmetrics/raster/toy_landscape_habitat.tif output=r #> produced at least one warning during execution: #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> SpatRaster read into GRASS using r.in.gdal from file  # inside distance lsm_distance(input = \"r\", zero_as_na = FALSE, type = \"outside\") #> Converting zero as null #> Calculation distance #> Reading raster map <r_null>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output raster maps... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Transforming raster to integer #> Changing the raster color  # functional connectivity lsm_functional_connectivity(input = \"r\",                             zero_as_na = FALSE,                             input_distance_outside = \"r_distance_outside\",                             gap_crossing = 100) #> Converting zero as null #> Selecting gap crossing pixels #> Summing gap crossing pixels to habitat raster #> Converting zero as null #> Identifying the patches #> Multipling pid by original habitat #> Counting the number of patches #> First pass #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Writing output map #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating the area #> Changing the raster color #> Removing extra rasters  # files rgrass::execGRASS(cmd = \"g.list\", type = \"raster\") #> r #> r_area_ha #> r_area_ha_int #> r_area_ncell #> r_confun100_area_ha #> r_confun100_area_ha_int #> r_confun100_area_ncell #> r_confun100_pid #> r_core100 #> r_core100_area_ha #> r_core100_area_ha_int #> r_core100_area_ha_original #> r_core100_area_ha_original_int #> r_core100_area_ncell #> r_core100_area_ncell_original #> r_core100_null #> r_core100_pct_buf100 #> r_core100_pid #> r_distance_inside #> r_distance_outside #> r_edge100 #> r_edge100_area_ha #> r_edge100_area_ha_int #> r_edge100_area_ha_original #> r_edge100_area_ha_original_int #> r_edge100_area_ncell #> r_edge100_area_ncell_original #> r_edge100_null #> r_edge100_pct_buf100 #> r_edge100_pid #> r_null #> r_pid  # import do r r_confun100_pid <- rgrass::read_RAST(\"r_confun100_pid\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c6331a7f30.grd> created. r_confun100_pid #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c6331a7f30.grd  #> name        : file300c6331a7f30  #> min value   :                 1  #> max value   :                 5   plot(r_confun100_pid, legend = FALSE, axes = FALSE, main = \"PID\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_confun100_pid)   # import habitat patch area to r r_confun100_area <- rgrass::read_RAST(\"r_confun100_area_ha\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Float32> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c622c513eb.grd> created. r_confun100_area #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c622c513eb.grd  #> name        : file300c622c513eb  #> min value   :                 1  #> max value   :                64   plot(r_confun100_area, legend = FALSE, axes = FALSE, main = \"Area (ha)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_confun100_area)"},{"path":"/reference/lsm_percentage.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate patch percentage — lsm_percentage","title":"Calculate patch percentage — lsm_percentage","text":"Calculate focal (\"moving window\") values cell using mean r.neighbors module multiplies 100.","code":""},{"path":"/reference/lsm_percentage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate patch percentage — lsm_percentage","text":"","code":"lsm_percentage(input, output = NULL, zero_as_na = FALSE, buffer_radius)"},{"path":"/reference/lsm_percentage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate patch percentage — lsm_percentage","text":"input [character=\"\"]  Habitat map, following binary classification (e.g. values 1,0 1,NA habitat,non-habitat). output [character=\"\"]  Patch area map name inside GRASS Data Base. zero_as_na [logical=\"\"] buffer_radius [numeric(1)=3]{3,...}  Integer indicating window size. window can defined one (square) two numbers (row, col); odd-sized weights matrix.","code":""},{"path":"/reference/lsm_percentage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate patch percentage — lsm_percentage","text":"","code":"library(lsmetrics) library(terra)  # read habitat data f <- system.file(\"raster/toy_landscape_habitat.tif\", package = \"lsmetrics\") r <- terra::rast(f)  # plot plot(r, legend = FALSE, axes = FALSE, main = \"Binary habitat\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r)   # find grass path_grass <- as.character(link2GI::findGRASS()[1]) path_grass #> [1] \"/usr/lib/grass82\"  # create grassdb rgrass::initGRASS(gisBase = path_grass,                   SG = r,                   gisDbase = \"grassdb\",                   location = \"newLocation\",                   mapset = \"PERMANENT\",                   override = TRUE) #> gisdbase    grassdb  #> location    newLocation  #> mapset      PERMANENT  #> rows        16  #> columns     16  #> north       7525600  #> south       7524000  #> west        234000  #> east        235600  #> nsres       100  #> ewres       100  #> projection: #>  PROJCRS[\"WGS 84 / UTM zone 23S\", #>     BASEGEOGCRS[\"WGS 84\", #>         ENSEMBLE[\"World Geodetic System 1984 ensemble\", #>             MEMBER[\"World Geodetic System 1984 (Transit)\"], #>             MEMBER[\"World Geodetic System 1984 (G730)\"], #>             MEMBER[\"World Geodetic System 1984 (G873)\"], #>             MEMBER[\"World Geodetic System 1984 (G1150)\"], #>             MEMBER[\"World Geodetic System 1984 (G1674)\"], #>             MEMBER[\"World Geodetic System 1984 (G1762)\"], #>             MEMBER[\"World Geodetic System 1984 (G2139)\"], #>             ELLIPSOID[\"WGS 84\",6378137,298.257223563, #>                 LENGTHUNIT[\"metre\",1]], #>             ENSEMBLEACCURACY[2.0]], #>         PRIMEM[\"Greenwich\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433]], #>         ID[\"EPSG\",4326]], #>     CONVERSION[\"UTM zone 23S\", #>         METHOD[\"Transverse Mercator\", #>             ID[\"EPSG\",9807]], #>         PARAMETER[\"Latitude of natural origin\",0, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8801]], #>         PARAMETER[\"Longitude of natural origin\",-45, #>             ANGLEUNIT[\"degree\",0.0174532925199433], #>             ID[\"EPSG\",8802]], #>         PARAMETER[\"Scale factor at natural origin\",0.9996, #>             SCALEUNIT[\"unity\",1], #>             ID[\"EPSG\",8805]], #>         PARAMETER[\"False easting\",500000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8806]], #>         PARAMETER[\"False northing\",10000000, #>             LENGTHUNIT[\"metre\",1], #>             ID[\"EPSG\",8807]]], #>     CS[Cartesian,2], #>         AXIS[\"(E)\",east, #>             ORDER[1], #>             LENGTHUNIT[\"metre\",1]], #>         AXIS[\"(N)\",north, #>             ORDER[2], #>             LENGTHUNIT[\"metre\",1]], #>     USAGE[ #>         SCOPE[\"Engineering survey, topographic mapping.\"], #>         AREA[\"Between 48°W and 42°W, southern hemisphere between 80°S and equator, onshore and offshore. Brazil.\"], #>         BBOX[-80,-48,0,-42]], #>     ID[\"EPSG\",32723]]   # import raster from r to grass rgrass::write_RAST(x = r, flags = c(\"o\", \"overwrite\"), vname = \"r\") #> Warning: The command: #> r.in.gdal -o --overwrite input=/tmp/Rtmpi5EcQB/temp_libpath2f5526a68015e/lsmetrics/raster/toy_landscape_habitat.tif output=r #> produced at least one warning during execution: #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> WARNING: Raster map <r> already exists and will be overwritten #> Over-riding projection check #> Importing raster map <r>... #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> SpatRaster read into GRASS using r.in.gdal from file  # percentage lsm_percentage(input = \"r\", zero_as_na = FALSE, buffer_radius = 100) #> Calculating proportion #> Opening selection map <r> #>    0%   6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Calculating percentage #> Changing the raster color  # files rgrass::execGRASS(cmd = \"g.list\", type = \"raster\") #> r #> r_area_ha #> r_area_ha_int #> r_area_ncell #> r_confun100_area_ha #> r_confun100_area_ha_int #> r_confun100_area_ncell #> r_confun100_pid #> r_core100 #> r_core100_area_ha #> r_core100_area_ha_int #> r_core100_area_ha_original #> r_core100_area_ha_original_int #> r_core100_area_ncell #> r_core100_area_ncell_original #> r_core100_null #> r_core100_pct_buf100 #> r_core100_pid #> r_distance_inside #> r_distance_outside #> r_edge100 #> r_edge100_area_ha #> r_edge100_area_ha_int #> r_edge100_area_ha_original #> r_edge100_area_ha_original_int #> r_edge100_area_ncell #> r_edge100_area_ncell_original #> r_edge100_null #> r_edge100_pct_buf100 #> r_edge100_pid #> r_null #> r_pct_buf100 #> r_pid  # import from grass to r r_pct <- rgrass::read_RAST(\"r_pct_buf100\", return_format = \"terra\") #> Checking GDAL data type and nodata value... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> Using GDAL data type <Byte> #> Exporting raster data to RRASTER format... #>    6%  12%  18%  25%  31%  37%  43%  50%  56%  62%  68%  75%  81%  87%  93% 100% #> r.out.gdal complete. File <\/tmp/RtmpWQJI7x/file300c67bd1120c.grd> created. r_pct #> class       : SpatRaster  #> dimensions  : 16, 16, 1  (nrow, ncol, nlyr) #> resolution  : 100, 100  (x, y) #> extent      : 234000, 235600, 7524000, 7525600  (xmin, xmax, ymin, ymax) #> coord. ref. : WGS 84 / UTM zone 23S (EPSG:32723)  #> source      : file300c67bd1120c.grd  #> name        : file300c67bd1120c  #> min value   :                 0  #> max value   :               100   # plot plot(r_pct, legend = FALSE, axes = FALSE, main = \"Habitat percentage (buffer 100 m)\") plot(as.polygons(r, dissolve = FALSE), lwd = .1, add = TRUE) plot(as.polygons(r), add = TRUE) text(r_pct)"},{"path":[]}]
